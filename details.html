
<!DOCTYPE html>
<html lang="en">

<head>
  <!--Meta tags for mobile and copyright, index -->
  <meta charset="utf-8">
  <meta name="keywords" content="TurtleMe,Turtles, Turtle hatcheries in Sri Lanka">
  <meta name="description" content="Turtle Hatcheries in Sri Lanka">
  <meta name="author" content="Zafir">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>Details Page</title>
  <link rel="stylesheet" href="css/details.css">
  <link rel="icon" type="image/x-icon" href="images/Logo.jpeg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script src="//unpkg.com/alpinejs" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/css/intlTelInput.css">
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>

</head>

<body>
  <div x-data="checkout">
  <header>
      <div class="wrapper">
          <div class="logo">
              <a href="index.html"><img src="images/Logo.jpeg" alt="logo"></a>
          </div>
          <div class="navbar">
              <div class="close-nav"><button>Ã—</button></div>
              <nav>
                  <ul>
                      <li><a href="index.html">Home</a></li>
                      <li><a href="Turtle categories.html">Turtle categories</a></li>
                      <li><a href="Hikkaduwa turtle hatchery.html"> Hikkaduwa hatchery</a></li>
                      <li><a href="Threats to turtles.html">Threats</a></li>
                      <li><a href="Kosgoda.html">Kosgoda</a></li>
                      <li><a href="Bentota.html">Bentota</a></li>
                      <li><a href="Purchase and Donate.html">Purchase and Donate</a></li>
                  </ul>
              </nav>
          </div>
          <div class="menu-bar">
              <button><i></i></button>
          </div>
      </div>
  </header>
  
  <div class="container">
    <img src="images/Booking Page imag.jpeg" alt="Turtle-main-image" style="width:100%;">
    <div class="main-text ">Details Page</div>
  </div>
  <br>
  <div class="box">
    <form x-on:submit.prevent="gotoPayment">
        <div>
            <h2 for="fullName">Full Name</h2>
            <p>Please enter your full name</p>
            <input type="text" name="fullName" id="fullName" x-model="guest.fullName" required pattern="[A-Za-z\s]+" title="Please enter a valid full name (letters and spaces only)" >
        </div>
        <div>
            <h2 for="mobile">Mobile</h2>
            <p>Please enter your mobile number</p>
            <input type="tel" name="mobile" id="mobile" x-model="guest.mobile" required  pattern="[0-9]{10}" title="Please enter a 10-digit mobile number">
        </div>
        <div>
            <h2 for="email">Email</h2>
            <p>Please enter your email</p>
            <input type="email" name="email" id="email" x-model="guest.email" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" title="Please enter a valid email address">
        </div>
        
        <div>
            <h2 for="confirmEmail">Confirm Email</h2>
            <p>Please enter your confirm email</p>
            <input type="email" name="confirmEmail" id="confirmEmail" x-model="guest.confirmEmail" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" title="Please enter a valid email address"
                x-bind:class="{ 'border-red-500': guest.confirmEmail !== guest.email }">
            <p x-show="guest.confirmEmail !== guest.email" class="text-red-500">Emails do not match.</p>
        </div>
        <div>
            <h2 for="gender">Gender</h2>
            <p>Select your Gender (optional)</p>
            <select type="gender" name="gender" id="gender" x-model="guest.gender">
                <option value="none">None</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>

        <h2>Purchase summary </h2>
        <div class="table-guest">
            <table>
               <tr>
                <th>Date</th>
                <td><div x-text="date"></div></td>
              </tr>
                <tr>
                    <th>Time Slots</th>
                    <td>
                        <template x-for="timeIndex in selectedTimeSlots">
                            <div x-text="openTimes[timeIndex].title"></div>
                        </template>
                    </td>
                </tr>
                <tr>
                <th>Sri Lankan Adult</th>
                    <td>
                        <div x-text=" ticketTypes[0].count"></div>
                    </td>
                <tr>
                <th>Sri Lankan Child</th>
                    <td>
                        <div x-text=" ticketTypes[1].count"></div>
                    </td>
                <tr>
                <th>Foreign Adult</th>
                    <td>
                        <div x-text=" ticketTypes[2].count"></div>
                    </td>
                </tr>
                <tr>
                <th>Foreign Child</th>
                    <td>
                        <div x-text=" ticketTypes[3].count"></div>
                    </td>
                </tr>
                <tr>
                <th>Infant</th>
                    <td>
                        <div x-text=" ticketTypes[4].count"></div>
                    </td>
                </tr>
                <tr>
                <th>Total Payable</th>
                <td> $ <span x-text="calculateGrandTotal(ticketTypes)">
                </span>
                </td>
                </tr>
            </table>
          </div>
          <br>

    <div class="table-guest">
        <table>
          <tr>
            <th>Guest Name</th>
            <td><div x-text="guest.fullName"></div></td>
          </tr>
          <tr>
            <th>mobile</th>
            <td><div x-text="guest.mobile"></div></td>
          </tr>
            <tr>
                <th>email</th>
                <td><div x-text="guest.email"></div></td>
            </tr>
            <th>Gender</th>
            <td><div x-text="guest.gender"></div></td>
            </tr>
        </table>
    </div>
        <br>
        <button type="submit" x-bind:disabled="guest.confirmEmail !== guest.email"><b>Proceed to Payment</b></button>
    </div>
</div>
</form>
<br>
    <footer class="footer">
        <div class="quick-links">
          <a href="index.html">Home</a>
          <a href="Purchase and Donate.html">Purchase and Donate</a>
          <a href="Threats to turtles.html">Threats</a>
          <a href="contact.html">Contact</a>
        </div>
        <div class="social-icons">
          <a href="https://web.facebook.com/Aturtles/?_rdc=1&_rdr"><i class="fab fa-facebook-f"></i></a>
          <a href="https://twitter.com/SeaTurtles_org"><i class="fab fa-twitter"></i></a>
          <a href="https://www.instagram.com/turtles_of_inst/?hl=en"><i class="fab fa-instagram"></i></a>
          
        </div>
        <div class="newsletter-form">
          <form action="#" method="post">
            <input type="email" name="email" placeholder="Enter your email" required>
            <input type="submit" value="Subscribe">
          </form>
        </div>
        <div class="developer">
          Developed by <a href="https://www.linkedin.com/in/zafir-sharaz-5922215b/">Zafir Sharaz</a>
        </div>
        <div class="copyright">
          &copy; 2023 All rights reserved. <a href="#">Privacy Policy</a> and <a href="#">Terms of Use</a>
        </div>
    </footer>
    





<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('checkout', () => ({
            openTimes: [
                {
                    title: '7AM to 8AM',
                    isPeak: false
                },
                {
                    title: '8AM to 9AM',
                    isPeak: false
                },
                {
                    title: '9AM to 10AM',
                    isPeak: false
                },
                {
                    title: '10AM to 11AM',
                    isPeak: true
                },
                {
                    title: '11AM to 12PM',
                    isPeak: true
                },
                {
                    title: '12PM to 1PM',
                    isPeak: true
                },
                {
                    title: '1PM to 2PM',
                    isPeak: false
                },
                {
                    title: '2PM to 3PM',
                    isPeak: false
                },
                {
                    title: '3PM to 4PM',
                    isPeak: true
                },
                {
                    title: '4PM to 5PM',
                    isPeak: true
                },
                {
                    title: '5PM to 6PM',
                    isPeak: true
                },
            ],
            calculateGrandTotal(ticketTypes) {
                let grandTotal = 0;
                ticketTypes.forEach(ticketType => {
                    grandTotal += ticketType.total;
                });
                return grandTotal;
            },
            guest: {
                fullName: '',
                mobile: '',
                email: '',
                confirmEmail: '',
                gender: ''
            },
            init() {

                this.ticketTypes = JSON.parse(localStorage.getItem('ticketTypes'));
                this.selectedTimeSlots = JSON.parse(localStorage.getItem('savedTimeslots'));;
                this.date = JSON.parse(localStorage.getItem('date'));
                
                
                const input = document.querySelector("#mobile");
                window.intlTelInput(input, {
                    utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",
                });
            },
            gotoPayment() {
                // set the guest data to local storage
                localStorage.setItem('guest', JSON.stringify(this.guest));
                // localStorage.setItem('ticketTypes', ticketTypes);
                // localStorage.setItem('selectedTimeSlots', savedTimesSlots);
                // localStorage.setItem('date', date);  
                
                
                

                 // redirect to payment page
                 window.location.href = 'payment.html'
            }
        }))
    })
</script>
<script src="javascript/script.js"></script>
</body>
</html>